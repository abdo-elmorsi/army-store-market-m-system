// npx prisma db push / to push the updated version to the database
// npx prisma db pull / to pull the updated version from the database
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("POSTGRES_PRISMA_URL") // uses connection pooling
  directUrl = env("POSTGRES_URL_NON_POOLING") // uses a direct connection
}

model User {
  id        Int      @id @default(autoincrement())
  username  String   @unique
  password  String
  role      String
  phone     String?
  img       String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Product {
  id               Int      @id @default(autoincrement())
  name             String   @unique
  description      String?
  quantityInStock  Int
  quantityInStore  Int
  quantityInMarket Int
  categoryId       Int // Foreign key to Category
  unitId           Int // Foreign key to Unit
  createdBy        Int // Assuming this refers to a User ID
  lastUpdatedBy    Int // Assuming this refers to a User ID
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt
}

model Transaction {
  id          Int      @id @default(autoincrement())
  userId      Int // Foreign key to User
  productId   Int // Foreign key to Product
  quantity    Int
  type        String
  description String
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model Unit {
  id        Int      @id @default(autoincrement())
  name      String   @unique
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Category {
  id        Int      @id @default(autoincrement())
  name      String   @unique
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
